dist: trusty
sudo: false
language: java
jdk:
- oraclejdk8
branches:
  except:
  - /\+travis\d+$/
env:
  global:
  - secure: CcazSC3A0gXtalgRMFDsvqa7yVVobWmT9nis5fpYyuCN82ufxkVA9Y4L29OOl2muacm7LNL7eV6RpPdhj51Xqxpwu59mWNATWvytK4QbU3eqHcw2q7u4NZSgU3yUXJAhp2s90BEVmG7PxgZUOR1ATv+TdBBRgeU68+hJjUvAV5vDSi4C9B88gj1+vcCAE89Skhp7PlCM2Yqe4UwlqIRAdIRC6vC3wB69VY8l8tG19Au/eHGDVMNsI2txmKJLaojsrm4lanf6qpQyCWAD8TEbcPd/MxyjxmHv6YN6zI0fYyZn7/oDtudBNxZYNnSVsZ6IVRM+gm+MEDSmQg1PpF8Sg/WpCdLI8ZbgdlECoU5HlXgLGIP9WgvHm9CwEkqOJPHKxJU6ZUe1a5fhJe6sXwGRJkUYzhYTxhfJUOjBjaGebRD+WB9Qux0tgdxuBzFD/yuHjWB8WVsLR1i62GP4mEoz6mn/h/HCW7kbfEUB/TKe6pUwCgLZVxv14WEXiO3Tp3cxI22fiFOm5eFm1+PZmRQZAeYw1lyKkJgMEJ5TfbVzrXC2EnoWVOTN3dHuHsK85nfYgCJkUfUNDUW+srPYO/72u+SlWEOiI7LjPR8dy2IpAgwd2Z+vBdxTCysHgDRq1RJMs6OVqCt4LScffGT3TSbWDm9iLkDX6lOLSc36+iajoWM=
install:
- nvm install 6.9.3
- npm install -g typescript
script: bash src/main/scripts/travis-build.bash
notifications:
  email: false
  webhooks:
    on_success: always
    on_failure: always
    on_start: always
    on_cancel: always
    on_error: always
    urls:
    - https://webhook.atomist.com/travis
cache:
  directories:
  - $HOME/.m2
deploy:
  provider: releases
  api_key:
    secure: bkbXzXvYn3OpU66tj5EcQ+/UBau8apIwG8a0/PJeLyLm+hjKd5HIV3bsBllb4FWmz1G4ybwZCcwKtlipvI4UF0WYDcs5HbpNF/g6OeFVuu1tR0LpRxv8h7Ss0HH6qa6VugYKWndBMDEhSP0INEAoiiaEV5Kj3+fb3x46nTABe0yCn4RKtsBzyOV7YxNb8PGM3F+/15eJI83JKX9AeO2Xk7O7p49mdkQvtXR0vU1jnPU/TbbiN9DbTS8oPuWMFdocjtgjgQAwNYZSpnWY9FeA7r4UNMy0Bg0v1yfcsZIzzk53hysO7xagjMEGXoPu860uLiPncoCOlJsYvP9n6QA4XJKdLIhPr6UsdcEbj/KymffWvMAQu9H0HB3r7yyMg6JrjBtuy3abBsO1D/FbL7DuTVE++aFIJVcCZc0qG64TZ5t56R0YdiMvWiasev5cymsZOsxVXVRBYsQ2btf17WMYiLB1D5VPeuJr4aD1ZxA2sp3b06kEUwsXTXZQiIAb50QB8uOTfEd2p4s1a/jVICYxp6kQc36+h99Fkw9fcvyTtYp/gAmrmXkoXr+Uy2OozjWMugjPMlJdW4FYmPA7ZxWOH05q7yzDevjBaIIO/KfuszTY/yx7WKgYj6f+qkCxAtS3RlAfzo3hY18oii6URpEcTsIBSKRiJiw4m/v4MPur/gk=
  on:
    tags: true
    condition: $TRAVIS_TAG =~ ^[0-9]+\.[0-9]+\.[0-9]+$
before_install:
- openssl aes-256-cbc -K $encrypted_a8460415f972_key -iv $encrypted_a8460415f972_iv
  -in atomist_sec.gpg.enc -out atomist_sec.gpg -d
addons:
  apt:
    packages:
    - openssl
    - gnupg
