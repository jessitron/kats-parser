dist: trusty
sudo: false
language: java
jdk:
- oraclejdk8
branches:
  except:
  - /\+travis\d+$/
env:
  global:
  - secure: CcazSC3A0gXtalgRMFDsvqa7yVVobWmT9nis5fpYyuCN82ufxkVA9Y4L29OOl2muacm7LNL7eV6RpPdhj51Xqxpwu59mWNATWvytK4QbU3eqHcw2q7u4NZSgU3yUXJAhp2s90BEVmG7PxgZUOR1ATv+TdBBRgeU68+hJjUvAV5vDSi4C9B88gj1+vcCAE89Skhp7PlCM2Yqe4UwlqIRAdIRC6vC3wB69VY8l8tG19Au/eHGDVMNsI2txmKJLaojsrm4lanf6qpQyCWAD8TEbcPd/MxyjxmHv6YN6zI0fYyZn7/oDtudBNxZYNnSVsZ6IVRM+gm+MEDSmQg1PpF8Sg/WpCdLI8ZbgdlECoU5HlXgLGIP9WgvHm9CwEkqOJPHKxJU6ZUe1a5fhJe6sXwGRJkUYzhYTxhfJUOjBjaGebRD+WB9Qux0tgdxuBzFD/yuHjWB8WVsLR1i62GP4mEoz6mn/h/HCW7kbfEUB/TKe6pUwCgLZVxv14WEXiO3Tp3cxI22fiFOm5eFm1+PZmRQZAeYw1lyKkJgMEJ5TfbVzrXC2EnoWVOTN3dHuHsK85nfYgCJkUfUNDUW+srPYO/72u+SlWEOiI7LjPR8dy2IpAgwd2Z+vBdxTCysHgDRq1RJMs6OVqCt4LScffGT3TSbWDm9iLkDX6lOLSc36+iajoWM=
  - secure: bzDQ20NdMZHz5PK2okmzSAJ1dxXphWEWoa0FmvfsAg0RtVT09EIeYk60EXlgg08QLxggkONtk96Pe+N5bCf47ey3rSq1Qkznsn92RUru+7VrfZHUeubb6vF3Rzq8My3xqs/3A9NSMadvrYgPawTOChDF2gKTeBQnpW/zAjaNeF3QONPSgAp5HV7qm/eY3LWIVOKeIRN8UBzz95pV5OzCCaS85cl27121Dtr0ereTkAkCfHrsTpqlNM3Nf7Be4/kXBiezIs+X+t8MFyEZlqMCLa1Ejj1xOd57hCJpbOPDBruKezITFtqfNl91Q3cgmzELkD5Bh3C/8704jPkhls75MJ2H+NpiO8i84RkCx5IyixH9Q6cPP6HuBR1RXp01B0Gdf+IBtMyKgQ5MLry9hpWsvagGv/CizU59zmfzsp8c3bFwhEj5CYG0OQ8v1ya7VS//H0rqNS8PJ8U1Lusv2A8b3o4x48aldU2Jq+4hQ9sJ3Tfv0h+Pth4l+AdljR2nQ8n60miz0cICMqbf8jRJPtFC8tK+CoJ54TBfD0unR3yNOTg285CKY69PXk2sKGl5Zt2jrn92BTwdOMJxI6KEiw8yOziVz5IgBoRJyEOvzEkYpTSvcXknzNFq+1Bk17nlh5Ifr+GTIOeFxeEHUQvuy8xMAecnY0geJlJmpc/nRvJNJ10=
install:
- nvm install 6.9.3
- npm install -g typescript
script: bash src/main/scripts/travis-build.bash
notifications:
  email: false
  webhooks:
    on_success: always
    on_failure: always
    on_start: always
    on_cancel: always
    on_error: always
    urls:
    - https://webhook.atomist.com/travis
cache:
  directories:
  - $HOME/.m2
deploy:
  provider: releases
  api_key:
    secure: XMVzAeihb2paKyUTYRRsJisjy5HCesi0FZ5sPLgmNl3U8+wkY70xlcsoJ83g8aB7yaOO4GTBUI6BzHHsN5qXPfFIgVCVVmmN9yAo6qcxj7X2Q0n1l7biawVmgpqjJdwwVWbd876mdJziLoSRqhfjP6LVp+10EZ3d5WYQ6KuwCvMptI7Ar/MLNZab0ZaebexaQCS/Z+FKekglNSXETxUdlpM87do2ZUtSDQ4A6K8lKKOseSq0sQqzaShpRkYXNi3D3HMxMSs4Iy75Beslcgcq0InQLSHbjLNOTDvZTgONABa6atGwJ5n6WbS7yKTJNH6aTxcpJlsNs+CnrWpQOJBRcysRxldsCUqW6CPA+zpYSWSmQ8OE2U1Rq9yKAKmvaLRA9uom1N5lC8kOWs6UsRkSudgZUDEBWidJbwAhqg30yxtlMiZtcB01vzXtcv4C64nzI4tI8e38xxVc6ieS1FFPJkYg2t/xd+ywGB58LlC1/9l/7xZEZGiQXafpPzi4xlOjw1CItpPmlMdBdIhe3MTFWgXrpwQVp04TpH6wGr234JToJJLI3JObHGJOebE75l2fijXCZvBvX1MX+y8dL1LJDfx84GCa9JNaE+fI0VTdlhVBDnlTq24i77jFHcBgKu2JX3jImHJsoVlDyUfab4JSr9YsG5PcuwTJrwV1doIYY8w=
  on:
    tags: true
    condition: $TRAVIS_TAG =~ ^[0-9]+\.[0-9]+\.[0-9]+$
before_install:
- openssl aes-256-cbc -K $encrypted_e8a1e85022ec_key -iv $encrypted_e8a1e85022ec_iv
  -in atomist_sec.gpg.enc -out ~\/Desktop/atomist_sec.gpg -d
addons:
  apt:
    packages:
    - openssl
    - gnupg
